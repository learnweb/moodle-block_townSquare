{"version":3,"file":"filtercontroller.min.js","sources":["../src/filtercontroller.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Javascript to show/hide letters based on all filters\r\n *\r\n * This file implements 1 functionality:\r\n * - If the \"save settings\" button is pressed, store the settings in the database.\r\n *\r\n * @module     block_townsquare/filtercontroller\r\n * @copyright  2024 Tamaro Walter\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n// Get all letters from townsquare.\r\nconst letters = document.querySelectorAll('.townsquare_letter');\r\n\r\n/**\r\n * Init function\r\n */\r\nexport function init() {\r\n    // First step: activate every letter by adding the filter classes.\r\n    letters.forEach(function(letter) {\r\n        letter.classList.add('ts_coursefilter_active');\r\n        letter.classList.add('ts_timefilter_active');\r\n        letter.classList.add('ts_letterfilter_active');\r\n    });\r\n\r\n    // Add a mutation listener to each letter.\r\n    letters.forEach(function(letter) {\r\n        const observer = new MutationObserver(function(mutations) {\r\n            mutations.forEach(function(mutation) {\r\n                if (mutation.attributeName === 'class') {\r\n                    // If the class of the letter changes, check if the letter should be shown or hidden.\r\n                    let coursefilter = letter.classList.contains('ts_coursefilter_active');\r\n                    let timefilter = letter.classList.contains('ts_timefilter_active');\r\n                    let letterfilter = letter.classList.contains('ts_letterfilter_active');\r\n\r\n                    // If all filters are active, show the letter.\r\n                    if (coursefilter && timefilter && letterfilter) {\r\n                        letter.style.display = 'block';\r\n                    } else {\r\n                        letter.style.display = 'none';\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        observer.observe(letter, {attributes: true});\r\n    });\r\n}\r\n"],"names":["letters","forEach","letter","classList","add","MutationObserver","mutations","mutation","attributeName","coursefilter","contains","timefilter","letterfilter","style","display","observe","attributes","document","querySelectorAll"],"mappings":"4JAkCIA,QAAQC,SAAQ,SAASC,QACrBA,OAAOC,UAAUC,IAAI,0BACrBF,OAAOC,UAAUC,IAAI,wBACrBF,OAAOC,UAAUC,IAAI,6BAIzBJ,QAAQC,SAAQ,SAASC,QACJ,IAAIG,kBAAiB,SAASC,WAC3CA,UAAUL,SAAQ,SAASM,aACQ,UAA3BA,SAASC,cAA2B,KAEhCC,aAAeP,OAAOC,UAAUO,SAAS,0BACzCC,WAAaT,OAAOC,UAAUO,SAAS,wBACvCE,aAAeV,OAAOC,UAAUO,SAAS,0BAIzCR,OAAOW,MAAMC,QADbL,cAAgBE,YAAcC,aACP,QAEA,cAM9BG,QAAQb,OAAQ,CAACc,YAAY;;;;;;;;;;;MAjCxChB,QAAUiB,SAASC,iBAAiB"}