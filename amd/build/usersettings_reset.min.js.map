{"version":3,"file":"usersettings_reset.min.js","sources":["../src/usersettings_reset.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to reset the user settings..\n *\n * This file implements 1 functionality:\n * - If the \"reset settings\" button is pressed, reset all settings and delete the users database record.\n *\n * @module     block_townsquare/usersettings_reset\n * @copyright  2024 Tamaro Walter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\n\n// Get the reset button for the user settings.\nconst resetbutton = document.getElementById('ts_usersettings_resetbutton');\n\n/**\n * Init function\n * @param {number} userid The id of the current user.\n */\nexport function init(userid) {\n    // Add event listener to the reset button.\n    resetbutton.addEventListener('click', async function() {\n        // Set up for AJAX call.\n        const data = {\n            methodname: 'block_townsquare_reset_usersettings',\n            args: {\n                userid: userid,\n            },\n        };\n        // Call the AJAX function.\n        let result = Ajax.call([data]);\n        window.alert('hi');\n        console.log(result);\n        // Make the clicked button green by adding a class and remove it afterward.\n        resetbutton.classList.add('bg-success', 'text-white', 'ts_button_transition');\n        setTimeout(function() {\n            resetbutton.classList.remove('bg-success');\n            resetbutton.classList.remove('text-white');\n        }, 1500);\n\n        return result;\n    });\n}\n"],"names":["obj","userid","resetbutton","addEventListener","async","data","methodname","args","result","Ajax","call","window","alert","console","log","classList","add","setTimeout","remove","_ajax","__esModule","default","document","getElementById"],"mappings":"+FA0B6B,IAAAA;;;;;;;;;;2EAStB,SAAcC,QAEjBC,YAAYC,iBAAiB,SAASC,iBAElC,MAAMC,KAAO,CACTC,WAAY,sCACZC,KAAM,CACFN,OAAQA,SAIhB,IAAIO,OAASC,cAAKC,KAAK,CAACL,OAUxB,OATAM,OAAOC,MAAM,MACbC,QAAQC,IAAIN,QAEZN,YAAYa,UAAUC,IAAI,aAAc,aAAc,wBACtDC,YAAW,WACPf,YAAYa,UAAUG,OAAO,cAC7BhB,YAAYa,UAAUG,OAAO,gBAC9B,MAEIV,WA9BfW,OAA6BnB,IAA7BmB,QAA6BnB,IAAAoB,WAAApB,KAAAqB,QAAArB,KAG7B,MAAME,YAAcoB,SAASC,eAAe,8BA6B3C"}