{"version":3,"file":"timefilter.min.js","sources":["../src/timefilter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for the time filter\n *\n * This file implements 1 functionality:\n * - Checks, which of the radio buttons is pressed and filters the content based on the time.\n *\n * @module     block_townsquare/timefilter\n * @copyright  2024 Tamaro Walter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n// Get the relevant radio buttons.\nconst radiobuttons = document.querySelectorAll('.ts_time_button');\n\n/**\n * Init function\n */\nexport function init() {\n    radiobuttons.forEach(function(radiobutton) {\n        radiobutton.addEventListener('change', function() {\n            //window.alert(radiobutton.id + \" \" + radiobutton.checked);\n            // Get\n            let currenttime = new Date().getTime() / 1000;\n            //window.alert(currenttime);\n            let timestart;\n            let timeend;\n\n            // Depending on the id, set a time span.\n            switch (radiobutton.id) {\n                case \"ts_time_all\":\n                    timestart = -9999999999;\n                    timeend = 9999999999;\n                    break;\n                case \"ts_time_next_week\":\n                    timestart = currenttime;\n                    timeend = currenttime + 604800;\n                    break;\n                case \"ts_time_next_month\":\n                    timestart = currenttime;\n                    timeend = currenttime + 2629743;\n                    break;\n                case \"ts_time_last_week\":\n                    timestart = currenttime - 604800;\n                    timeend = currenttime;\n                    break;\n                case \"ts_time_last_month\":\n                    timestart = currenttime - 2629743;\n                    timeend = currenttime;\n                    break;\n                default:\n                    timestart = -9999999999;\n                    timeend = 9999999999;\n                    break;\n            }\n\n            // Get all the right letters.\n            const letters = document.querySelectorAll('.townsquare_letter');\n\n            // Loop through each letter and hide/show based on radiobutton state\n            letters.forEach(function(letter) {\n                // Get the created time stamp of each letter.\n                let lettertime = letter.querySelector('.townsquareletter_date').id;\n\n                // If the letter is in the time span, show it.\n                if (radiobutton.checked) {\n                    if (lettertime >= timestart && lettertime <= timeend) {\n                        letter.style.display = 'block'; // Show the letter\n                    } else {\n                        letter.style.display = 'none'; // Hide the letter\n                    }\n                } else {\n                    letter.style.display = 'block'; // Show the letter\n                }\n\n            });\n        });\n    });\n}"],"names":["radiobuttons","forEach","radiobutton","addEventListener","timestart","timeend","currenttime","Date","getTime","id","document","querySelectorAll","letter","lettertime","querySelector","checked","style","display"],"mappings":"sJAiCIA,aAAaC,SAAQ,SAASC,aAC1BA,YAAYC,iBAAiB,UAAU,eAK/BC,UACAC,QAHAC,aAAc,IAAIC,MAAOC,UAAY,WAMjCN,YAAYO,QACX,sBAqBDL,WAAa,WACbC,QAAU,qBAlBT,oBACDD,UAAYE,YACZD,QAAUC,YAAc,iBAEvB,qBACDF,UAAYE,YACZD,QAAUC,YAAc,kBAEvB,oBACDF,UAAYE,YAAc,OAC1BD,QAAUC,sBAET,qBACDF,UAAYE,YAAc,QAC1BD,QAAUC,YASFI,SAASC,iBAAiB,sBAGlCV,SAAQ,SAASW,YAEjBC,WAAaD,OAAOE,cAAc,0BAA0BL,GAG5DP,YAAYa,QAERH,OAAOI,MAAMC,QADbJ,YAAcT,WAAaS,YAAcR,QAClB,QAEA,OAG3BO,OAAOI,MAAMC,QAAU;;;;;;;;;;;MA3DrCjB,aAAeU,SAASC,iBAAiB"}